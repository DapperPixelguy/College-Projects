<!DOCTYPE HTML>

<html lang="en">
    <head>
        <title>{% block title %}{%endblock%} - Devon RFU Colts</title>
        <link rel="icon" href="https://devonrfu.co.uk/wp-content/uploads/2025/03/devonrfu-logo.svg">
        <link rel="preload" href="static/Placeholder_view_vector.svg" as="image">
        <link rel="preload" href="static/image.png" as="image">
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='animations.css') }}">
        <!--Barlow Condensed for titles/large text-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        {% block head %}

        {% endblock %}
    </head>
    <body>
        <header>
            <img src="https://devonrfu.co.uk/wp-content/uploads/2025/03/devonrfu-logo.svg" alt="Devon RFU logo" class="logo" tabindex="0">
            <h1 id='h1-title' class="barlow-condensed"><span>{{ self.title().upper() }}</span></h1>
            <div id="header-profile">
                {% if current_user.is_authenticated %}
                <h4 class="">Hi, {{ current_user.name }}</h4>
                <a href="{{ url_for('main.admin') }}"><img src="{{ url_for('static', filename=current_user.picture) }}" alt="Profile Picture" id="profile-picture"></a>
                {% endif %}
                {% if not current_user.is_authenticated %}
                    <h4 class="">Log in / Sign Up</h4>
                <a href="{{ url_for('auth.login') }}"><img src="{{ url_for('static', filename='uploads/blank_profile.png') }}" alt="Profile Picture" id="profile-picture"></a>
                {% endif %}
            </div>
        </header>
        <nav id="nav">
            <ul class="barlow-condensed">
                <li id="fixtures"><a href="{{ url_for('main.fixtures') }}"><span>FIXTURES</span></a></li>
                <li id="match"><a href="{{ url_for('main.results') }}"><span>RESULTS</span></a></li>
                <li><a href="{{ url_for('main.league_table') }}"><span>LEAGUE TABLE</span></a></li>
                <li><a><span>ABOUT US</span></a></li>
            </ul>
        </nav>
        <div id="img" class="fadeIn">
            {% block content %}
            {% endblock %}
        </div>

        {% block footer %}

        {% endblock %}
    <script>
        const logo = document.querySelector('.logo')
        const nav = document.getElementById('nav')
        const reducedMotion = window.matchMedia(`(prefers-reduced-motion: reduce)`).matches === true
        let logoCooldown

        // Click on the logo to go to the home page
        logo.addEventListener('click', () => {
                window.location.href = '/'
        })

        // Make the logo accessible to keyboard navigation
        logo.addEventListener('keypress', (event)=>{
            if (event.key === 'Enter') {
                window.location.href = '/'
            }
        })

        //
        function highlightNavSelection() {
            let currentPage = document.title.split(' ')[0].toLowerCase()
            nav.querySelector('ul').querySelectorAll('li').forEach( li => {
                if (li.id === currentPage) {
                    li.classList.add('selected')
                }
            })
        }
        window.addEventListener('DOMContentLoaded', highlightNavSelection)

        // Disable the chance for the logo to spin if the user prefers reduced motion

        if (!reducedMotion){
            $('.logo').mouseover(logoSpin)
        }
        async function logoSpin() {
            const duration = 600
            if (!logoCooldown && (Math.random()*100 < 3)){

                logoCooldown = true
                console.log('Spin')
                const animation = [
                    {transform: "rotate(0) scale(1)"},
                    {transform: "rotate(180deg) scale(0.5)", filter: 'blur(2px)'},
                    {transform: "rotate(365deg) scale(1)"}
                ]
                logo.animate(animation, {
                    easing: 'ease-in-out',
                    duration: duration
                } )
                setTimeout(()=>logoCooldown=false, 10000)

            }
        }



new IntersectionObserver(
  ([e]) => nav.classList.toggle('stuck', e.intersectionRatio < 1),
  { threshold: 1, rootMargin: '-0.05px 100px 100px 100px' }
).observe(nav);
    </script>
    {% block script %}
    {% endblock %}
    </body>
</html>